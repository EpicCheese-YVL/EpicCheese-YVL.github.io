<!DOCTYPE html>
<html lang="en" data-halloween="on">
<head>
  <meta charset="UTF-8">
  <title>Our Quotes ‚Äî Eternal Halloween</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link href="https://fonts.googleapis.com/css2?family=Creepster&family=Work+Sans:wght@300;600;700&display=swap" rel="stylesheet">

  <style>
    :root {
      --hh-orange: #ff7a18;
      --hh-bg-grad-1: #0b0f13;
      --hh-bg-grad-2: #1f0f06;
      --background: linear-gradient(180deg, var(--hh-bg-grad-1) 0%, var(--hh-bg-grad-2) 100%);
      --card-bg: rgba(20,16,14,0.92);
      --text: #ffeacb;
      --primary: var(--hh-orange);
      --primary-dark: #c25b0f;
      --shadow: 0 6px 26px rgba(0,0,0,0.5);
      --border-radius: 12px;
      --transition: 0.23s cubic-bezier(.4,0,.2,1);
    }

    html, body {
      margin: 0;
      padding: 0;
      min-height: 100vh;
      background: var(--background);
      color: var(--text);
      font-family: 'Work Sans', system-ui, sans-serif;
      overflow-x: hidden;
    }

    body::before {
      content: "";
      position: fixed;
      inset: 0;
      pointer-events: none;
      background-image: radial-gradient(rgba(255,138,0,0.02) 1px, transparent 1px);
      background-size: 40px 40px;
      mix-blend-mode: overlay;
      opacity: 0.5;
      z-index: 0;
    }

    /* üëª Fog Overlay */
    #fog {
      position: fixed;
      inset: 0;
      background: url('https://upload.wikimedia.org/wikipedia/commons/4/49/Fog_texture.png') repeat;
      background-size: 1200px 800px;
      opacity: 0.15;
      mix-blend-mode: lighten;
      animation: fogMove 120s linear infinite;
      z-index: 1;
      pointer-events: none;
    }
    @keyframes fogMove { from { background-position:0 0; } to { background-position:2000px 1000px; } }

    .container {
      position: relative;
      z-index: 2;
      max-width: 680px;
      margin: 36px auto;
      background: var(--card-bg);
      border-radius: var(--border-radius);
      box-shadow: var(--shadow);
      padding: 32px 20px 22px;
      min-height: 420px;
      overflow: visible; /* important so sprites are visible */
    }

    header { text-align: center; margin-bottom: 18px; opacity: 0; transform: translateY(20px);}
    .title { display: flex; gap: 12px; align-items: center; justify-content: center; }

    h1 {
      margin: 0;
      font-size: 1.6rem;
      font-weight: 700;
      font-family: 'Creepster', cursive;
      color: var(--primary);
      text-shadow: 0 2px 6px rgba(0,0,0,0.45);
      opacity: 0;
      transition: opacity 1s ease, transform 1s ease;
    }

    .pumpkin {
      font-family: 'Creepster', cursive;
      font-size: 1.4rem;
      transition: opacity 1s ease, transform 1s ease;
      opacity: 0;
    }
    .pumpkin:hover { transform: rotate(12deg) scale(1.15); }

    .tabs { display: flex; gap: 12px; justify-content: center; margin-bottom: 18px; }
    .tab-btn { background: none; border: none; font-size: 1.08em; font-weight: 600; color: var(--primary); padding: 7px 24px; border-radius: 20px; cursor: pointer; transition: background var(--transition), color var(--transition); }
    .tab-btn.active, .tab-btn:hover { background: var(--primary); color: #fff; }

    .quotes-list { list-style: none; padding: 0; margin: 0; }
    .quote-card { background: rgba(255,255,255,0.02); border-radius: 12px; margin-bottom: 16px; padding: 18px 16px; font-size: 1.06em; display: flex; flex-direction: column; gap: 8px; border: 1px solid rgba(255,255,255,0.03); transition: opacity .3s, transform .3s; }
    .quote-card.hide { opacity: 0; transform: translateY(28px) scale(.98); }
    .quote-text { font-size: 1.16em; line-height: 1.45; }
    .quote-author { font-weight: 700; color: var(--primary); text-shadow: 0 0 6px rgba(255,122,24,0.6); }
    .delete-btn { border: none; background: none; font-size: 1.1em; color: #e53935; cursor: pointer; }

    .add-quote-form { display: flex; flex-direction: column; gap: 12px; margin-top: 20px; max-width: 520px; margin-inline: auto; }
    .add-quote-form input, .add-quote-form textarea { font-size: 1em; padding: 10px; border: 1.5px solid rgba(255,138,0,0.12); border-radius: 8px; background: rgba(255,255,255,0.02); color: var(--text); }
    .add-quote-form button { background: var(--primary); color: white; border: none; border-radius: 10px; padding: 10px 0; font-weight: 700; transition: background var(--transition), transform .12s; }
    .add-quote-form button:hover { background: var(--primary-dark); transform: translateY(-2px); }

    .sprite {
      position: fixed;
      font-size: 28px;
      opacity: 0.9;
      pointer-events: none;
      z-index: 999; /* ensure sprites appear above everything */
    }
    @keyframes floatDown { from { transform: translateY(-10vh); opacity:1;} to { transform: translateY(120vh) rotate(60deg) scale(.9); opacity:0;} }

    /* üëª Spooky intro */
    #introOverlay { position: fixed; inset:0; z-index:9999; background: radial-gradient(circle at center, rgba(0,0,0,0.75) 0%, #000 90%); display:flex; flex-direction:column; align-items:center; justify-content:center; font-family: 'Creepster', cursive; color:#ff7a18; text-shadow:0 0 14px rgba(255,122,24,0.7); opacity:1; transition: opacity 1.5s ease; }
    #introOverlay.fade-out { opacity:0; pointer-events:none; }
    #introText { font-size:2.6rem; animation:flicker 1.8s infinite alternate; }
    #introPumpkin { font-size:3rem; margin-top:18px; animation:bounceIntro 1.6s ease-in-out infinite; }
    @keyframes flicker { 0%,19%,21%,23%,25%,54%,56%,100%{opacity:1;} 20%,24%,55%{opacity:0.4;} }
    @keyframes bounceIntro {0%,100%{transform:translateY(0);}50%{transform:translateY(-12px);}}
  </style>
</head>
<body>
  <div id="fog"></div>

  <div id="introOverlay">
    <div id="introText">Happy Halloween...</div>
    <div id="introPumpkin">üéÉ</div>
  </div>

  <div class="container">
    <header>
      <div class="title">
        <h1 id="siteTitle">Our Quotes</h1>
        <div class="pumpkin" id="pumpkin">üéÉ</div>
      </div>
      <div style="font-size:1.1em; color:#9aa6b0; margin-top:6px;">Website created, owned and updated by Veer</div>
    </header>

    <nav class="tabs">
      <button class="tab-btn active" id="tabView">View Quotes</button>
      <button class="tab-btn" id="tabAdd">Add Quote</button>
    </nav>

    <section id="quotesSection">
      <ul class="quotes-list" id="quotesList"></ul>
      <div id="noQuotes" style="text-align:center; color:#999; margin-top:40px; display:none;">No quotes yet. Add one!</div>
    </section>

    <section id="addSection" style="display:none;">
      <form class="add-quote-form" id="quoteForm" autocomplete="off">
        <textarea id="quoteInput" placeholder="Type your quote..." required rows="2" maxlength="200"></textarea>
        <input id="authorInput" type="text" placeholder="Your name" maxlength="30">
        <button type="submit">Add Quote</button>
      </form>
    </section>
  </div>

  <audio id="ambient" loop autoplay>
    <source src="https://cdn.pixabay.com/audio/2022/03/29/audio_3b9d939eb2.mp3" type="audio/mpeg">
  </audio>

  <audio id="spookyChime" preload="auto">
    <source src="https://freesound.org/data/previews/354/354915_4939433-lq.mp3" type="audio/mpeg">
  </audio>

  <script>
    // Quotes logic
    const quotesList=document.getElementById('quotesList');
    const noQuotes=document.getElementById('noQuotes');
    const quoteForm=document.getElementById('quoteForm');
    const quoteInput=document.getElementById('quoteInput');
    const authorInput=document.getElementById('authorInput');
    const spookyChime=document.getElementById('spookyChime');

    function getQuotes(){return JSON.parse(localStorage.getItem('quotesEpic'))||[
      {text:"I like bread",author:"Aimee",id:1},{text:"You'll never know",author:"Aimee",id:2},
      {text:"Poori+ketchup+sabji is the best",author:"Tanay",id:3},
      {text:"Life is hard; it's harder if you're stupid",author:"Kaya",id:4},
      {text:"If someone is being rude to you don‚Äôt waste time just hit them with a right hook on the jaw",author:"Shiv",id:5},
      {text:"THEY SAY MORE MONEY MORE PROBLEMS: BRING ON THE PROBLEMS",author:"Jofton",id:6}
    ];}
    function saveQuotes(q){localStorage.setItem('quotesEpic',JSON.stringify(q));}
    function canDelete(q){const a=JSON.parse(sessionStorage.getItem('userQuotesEpic'))||[];return a.includes(q.id);}
    function escapeHtml(s){return String(s||'').replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;");}

    let quotes=getQuotes();
    function renderQuotes(){
      quotesList.innerHTML='';
      if(!quotes.length){noQuotes.style.display='';return;}
      noQuotes.style.display='none';
      quotes.slice().reverse().forEach(q=>{
        const li=document.createElement('li');
        li.className='quote-card hide';
        li.dataset.id=q.id;
        li.innerHTML=`<div class="quote-text">${escapeHtml(q.text)}</div>
          <div class="quote-meta">
            <div class="quote-author">- ${q.author?escapeHtml(q.author):'Anonymous'}</div>
            <div>${canDelete(q)?'<button class="delete-btn">üóëÔ∏è</button>':''}</div>
          </div>`;
        quotesList.appendChild(li);
        requestAnimationFrame(()=>li.classList.remove('hide'));
      });
    }

    quoteForm.onsubmit=e=>{
      e.preventDefault();
      const text=quoteInput.value.trim();
      if(!text)return;
      const author=authorInput.value.trim();
      const id=Date.now();
      const q={text,author,id};
      quotes.push(q);
      saveQuotes(quotes);
      const userAdded=JSON.parse(sessionStorage.getItem('userQuotesEpic'))||[];
      userAdded.push(id);
      sessionStorage.setItem('userQuotesEpic',JSON.stringify(userAdded));
      renderQuotes();
      quoteInput.value=authorInput.value='';
      if(spookyChime.play){spookyChime.currentTime=0; spookyChime.play().catch(()=>{});}
    };

    quotesList.onclick=e=>{
      if(!e.target.closest('.delete-btn'))return;
      const id=parseInt(e.target.closest('.quote-card').dataset.id);
      quotes=quotes.filter(q=>q.id!==id);
      saveQuotes(quotes);
      renderQuotes();
    };

    // Tabs
    const tabView=document.getElementById('tabView');
    const tabAdd=document.getElementById('tabAdd');
    const quotesSection=document.getElementById('quotesSection');
    const addSection=document.getElementById('addSection');
    function setTab(tab){
      tabView.classList.toggle('active',tab==='view');
      tabAdd.classList.toggle('active',tab==='add');
      quotesSection.style.display=tab==='view'?'':'none';
      addSection.style.display=tab==='add'?'':'none';
    }
    tabView.onclick=()=>setTab('view');
    tabAdd.onclick=()=>setTab('add');
    setTab('view');

    // Sprites
    const spriteEmojis=['ü¶á','üëª','üéÉ','üíÄ','üï∑Ô∏è','üï∏Ô∏è','üßõ‚Äç‚ôÇÔ∏è','üßü‚Äç‚ôÄÔ∏è'];
    let activeSprites=0,maxActiveSprites=18;
    function spawnFallingSprite(){
      if(activeSprites>=maxActiveSprites)return;
      const el=document.createElement('div');
      el.className='sprite';
      el.style.left=Math.random()*100+'vw';
      el.style.fontSize=(16+Math.random()*28)+'px';
      el.style.opacity=(0.5+Math.random()*0.5).toFixed(2);
      const speed=6+Math.random()*6;
      el.style.animation=`floatDown ${speed}s linear forwards`;
      el.textContent=spriteEmojis[Math.floor(Math.random()*spriteEmojis.length)];
      document.body.appendChild(el);
      activeSprites++;
      setTimeout(()=>{el.remove(); activeSprites--;},speed*1000+500);
    }
    setInterval(()=>{spawnFallingSprite();},600);

    // Intro Animation
    const introOverlay=document.getElementById('introOverlay');
    const siteTitle=document.getElementById('siteTitle');
    const pumpkin=document.getElementById('pumpkin');
    setTimeout(()=>{
      introOverlay.classList.add('fade-out');
      setTimeout(()=>introOverlay.remove(),1600);
      siteTitle.style.transition='opacity 1s, transform 1s';
      pumpkin.style.transition='opacity 1s, transform 1s';
      setTimeout(()=>{siteTitle.style.opacity=1; siteTitle.style.transform='translateY(0)'; pumpkin.style.opacity=1; pumpkin.style.transform='translateY(0)';},500);
    },2500);

    // Initial render
    renderQuotes();
  </script>
</body>
</html>
